/*
========================================================================================
    Container configuration for all processes
========================================================================================
*/

process {
    withName: 'SAMTOOLS_.*' {
        container = 'quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1'
    }
    
    withName: 'MANTA_.*' {
        container = 'quay.io/biocontainers/manta:1.6.0--h9ee0642_1'
    }
    
    withName: 'PBSV_.*' {
        container = 'quay.io/biocontainers/pbsv:2.9.0--h9ee0642_0'
    }
    
    withName: 'SNIFFLES' {
        container = 'quay.io/biocontainers/sniffles:2.2--pyhdfd78af_0'
    }
    
    withName: 'CUTESV_.*' {
        container = 'quay.io/biocontainers/cutesv:2.0.3--pyhdfd78af_0'
    }
    
    withName: 'TRUVARI_BENCH' {
        ext.args = { "--passonly --dup-to-ins ${meta.truvari_args ?: ''}" }
        ext.prefix = { "${meta.technology}_${meta.tool}_${meta.target}" }
        publishDir = [
            path: { "${params.outdir}/real_intervals/${meta.technology}/truvari/${meta.tool}/${meta.target}" },
            mode: 'copy',
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ]
    }
    
    withName: 'BGZIP_TABIX.*' {
        container = 'community.wave.seqera.io/library/htslib:1.21--ff8e28a189fbecaa'
        ext.args2 = '-p vcf'
    }
    
    withName: 'BEDTOOLS_.*' {
        container = 'quay.io/biocontainers/bedtools:2.31.1--hf5e1c6e_0'
    }
    
    withName: 'GUNZIP' {
        container = 'quay.io/biocontainers/gzip:1.12'
    }
    
    withName: 'SIMULATE_TARGETS|GATHER_STATISTICS' {
        container = singularity.enabled ? 
            'library://blazv/benchmark-sv/r-env:4-4-1' : 
            'rocker/tidyverse:4.4.1'
    }
    
    withName: 'DOWNLOAD_.*' {
        container = 'quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1'
    }
    
    withName: 'CREATE_.*' {
        container = singularity.enabled ? 
            'library://blazv/benchmark-sv/r-env:4-4-1' : 
            'rocker/tidyverse:4.4.1'
    }
}
