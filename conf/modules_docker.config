/*
========================================================================================
    Module-specific container settings for Docker
========================================================================================
    Docker-compatible container images (uses Docker Hub instead of Singularity Library)
----------------------------------------------------------------------------------------
*/

process {
    
    // Samtools for BAM/FASTA indexing
    withName: 'SAMTOOLS_FAIDX' {
        container = 'quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1'
    }
    
    // Manta for Illumina short-read SV calling
    withName: 'MANTA_GERMLINE' {
        container = 'quay.io/biocontainers/manta:1.6.0--h9ee0642_1'
    }
    
    withName: 'MANTA_WES' {
        container = 'quay.io/biocontainers/manta:1.6.0--h9ee0642_1'
    }
    
    withName: 'MANTA_WGS' {
        container = 'quay.io/biocontainers/manta:1.6.0--h9ee0642_1'
    }
    
    // PBSV for PacBio long-read SV calling
    withName: 'PBSV_DISCOVER' {
        container = 'quay.io/biocontainers/pbsv:2.9.0--h9ee0642_0'
    }
    
    withName: 'PBSV_CALL' {
        container = 'quay.io/biocontainers/pbsv:2.9.0--h9ee0642_0'
    }
    
    // Sniffles for long-read SV calling
    withName: 'SNIFFLES' {
        container = 'quay.io/biocontainers/sniffles:2.2--pyhdfd78af_0'
    }
    
    // cuteSV for long-read SV calling
    withName: 'CUTESV' {
        container = 'quay.io/biocontainers/cutesv:2.0.3--pyhdfd78af_0'
    }
    
    withName: 'CUTESV_PACBIO' {
        container = 'quay.io/biocontainers/cutesv:2.0.3--pyhdfd78af_0'
    }
    
    withName: 'CUTESV_ONT' {
        container = 'quay.io/biocontainers/cutesv:2.0.3--pyhdfd78af_0'
    }
    
    // Truvari for SV benchmarking
    withName: 'TRUVARI_BENCH' {
        container = 'quay.io/biocontainers/truvari:4.0.0--pyhdfd78af_0'
    }
    
    // BGZIP and TABIX for VCF compression and indexing
    // Using htslib 1.21 which supports --threads option
    withName: 'BGZIP_TABIX' {
        container = 'community.wave.seqera.io/library/htslib:1.21--ff8e28a189fbecaa'
    }
    
    withName: 'BGZIP_TABIX_PBSV' {
        container = 'community.wave.seqera.io/library/htslib:1.21--ff8e28a189fbecaa'
    }
    
    withName: 'BGZIP_TABIX_CUTESV_PACBIO' {
        container = 'community.wave.seqera.io/library/htslib:1.21--ff8e28a189fbecaa'
    }
    
    withName: 'BGZIP_TABIX_CUTESV_ONT' {
        container = 'community.wave.seqera.io/library/htslib:1.21--ff8e28a189fbecaa'
    }
    
    // Bedtools for region intersection
    withName: 'BEDTOOLS_INTERSECT' {
        container = 'quay.io/biocontainers/bedtools:2.31.1--hf5e1c6e_0'
    }
    
    // GUNZIP for decompression
    withName: 'GUNZIP' {
        container = 'quay.io/biocontainers/gzip:1.12'
    }
    
    // R-based processes for simulation and statistics
    // Using rocker/tidyverse as Docker alternative to the Singularity r-env image
    withName: 'SIMULATE_TARGETS' {
        container = 'rocker/tidyverse:4.4.1'
    }
    
    withName: 'GATHER_STATISTICS' {
        container = 'rocker/tidyverse:4.4.1'
    }
    
    // GIAB truth set download processes
    withName: 'DOWNLOAD_GIAB_TRUTH_SET' {
        container = 'quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1'
    }
    
    withName: 'DOWNLOAD_GIAB_REFERENCE' {
        container = 'quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1'
    }
    
    withName: 'DOWNLOAD_GIAB_BAM' {
        container = 'quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1'
    }
    
    withName: 'DOWNLOAD_ANNOTATIONS' {
        container = 'quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1'
    }
    
    withName: 'CREATE_TARGET_BEDS' {
        container = 'rocker/tidyverse:4.4.1'
    }
    
    withName: 'TABIX_VCF' {
        container = 'quay.io/biocontainers/tabix:1.11--hdfd78af_0'
    }
}
