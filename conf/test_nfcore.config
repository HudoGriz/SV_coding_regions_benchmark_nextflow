/*
========================================================================================
    Nextflow config file for running tests using nf-core test data
========================================================================================
    Defines input files from nf-core/test-datasets repository for automated testing
----------------------------------------------------------------------------------------
*/

params {
    // Test configuration metadata
    config_profile_name        = 'nf-core test data profile'
    config_profile_description = 'Minimal test dataset using nf-core/test-datasets to check pipeline function'

    // Limit resources for testing
    max_cpus   = 2
    max_memory = '6.GB'
    max_time   = '6.h'

    // Base URL for nf-core test-datasets (modules branch)
    test_data_base = 'https://raw.githubusercontent.com/nf-core/test-datasets/modules/data'

    // Reference genome - chr22 reference matching the BAM files
    // NOTE: Remote files will be downloaded by Nextflow automatically
    fasta = "${test_data_base}/genomics/homo_sapiens/genome/genome.fasta"

    // Input BAM files - using chr22-specific BAM files that match the reference
    illumina_wes_bam = "${test_data_base}/genomics/homo_sapiens/illumina/bam/NA12878.chr22.1X.bam"
    illumina_wgs_bam = "${test_data_base}/genomics/homo_sapiens/illumina/bam/NA12878.chr22.bam"
    
    // Long-read technologies not included in minimal test
    pacbio_bam = null
    ont_bam = null

    // Truth VCF for benchmarking - using a simpler VCF for testing
    // Using germline VCF as truth set for testing purposes
    benchmark_vcf = "${test_data_base}/genomics/homo_sapiens/illumina/gvcf/test.genome.vcf.gz"

    // Target BED files - using minimal test regions
    high_confidence_targets = "${test_data_base}/genomics/homo_sapiens/genome/genome.bed"
    gene_panel_targets = "${test_data_base}/genomics/homo_sapiens/genome/genome.bed"
    wes_utr_targets = "${test_data_base}/genomics/homo_sapiens/genome/genome.bed"

    // Optional files
    tandem_repeats = null

    // Truvari parameters - relaxed for testing
    truvari_refdist = 1000
    truvari_pctsize = 0.5
    truvari_pctovl = 0
    truvari_pctseq = 0

    // Output configuration
    outdir = 'test_results_nfcore'
    run_name = 'nfcore_test'
}

// Process-specific overrides for testing
process {
    cpus   = { check_max( 1, 'cpus' ) }
    memory = { check_max( 2.GB, 'memory' ) }
    time   = { check_max( 1.h, 'time' ) }
}
