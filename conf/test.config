/*
========================================================================================
    Nextflow config file for running minimal tests
========================================================================================
    Defines bundled input files and test parameters for basic pipeline testing
----------------------------------------------------------------------------------------
*/

params {
    // Test configuration metadata
    config_profile_name        = 'Test profile'
    config_profile_description = 'Minimal test dataset to check pipeline function'

    // Limit resources for testing
    max_cpus   = 2
    max_memory = '6.GB'
    max_time   = '6.h'

    // Input files - using test data in repository's test_data/ directory
    fasta = "${projectDir}/test_data/genome.fa"

    // BAM files
    illumina_wes_bam = "${projectDir}/test_data/illumina_wes.bam"
    illumina_wgs_bam = null
    pacbio_bam = null
    ont_bam = null

    // Truth VCF for benchmarking
    benchmark_vcf = "${projectDir}/test_data/truth.vcf.gz"

    // Target BED files
    high_confidence_targets = "${projectDir}/test_data/high_conf.bed"
    gene_panel_targets = "${projectDir}/test_data/gene_panel.bed"
    wes_utr_targets = "${projectDir}/test_data/wes_utr.bed"

    // Optional files
    tandem_repeats = null

    // Truvari parameters - relaxed for testing
    truvari_refdist = 1000
    truvari_pctsize = 0.5
    truvari_pctovl = 0
    truvari_pctseq = 0

    // Output configuration
    outdir = 'test_results'
    run_name = 'test_run'
}

// Process-specific overrides for testing
process {
    cpus   = { check_max( 1, 'cpus' ) }
    memory = { check_max( 2.GB, 'memory' ) }
    time   = { check_max( 1.h, 'time' ) }
}
